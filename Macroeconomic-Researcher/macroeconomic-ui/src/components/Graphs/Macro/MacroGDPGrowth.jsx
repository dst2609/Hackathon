import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

 export const data = [
    ['Year', 'China', 'India', 'United States'],
    [1960, 0, 0, 0],
    [1961, -27.27, 3.722742533, 2.3],
    [1962, -5.57999999, 2.931127735, 6.1],
    [1963, 10.3, 5.994353262, 4.4],
    [1964, 18.17999999, 7.452950123, 5.8],
    [1965, 16.95, -2.63577011, 6.4],
    [1966, 10.65, -0.05532877, 6.5],
    [1967, -5.770000004, 7.825963031, 2.5],
    [1968, -4.099999987, 3.387929176, 4.8],
    [1969, 16.94, 6.539700299, 3.1],
    [1970, 19.3, 5.157229737, -0.283491263],
    [1971, 7.059999999, 1.642930375, 3.293351639],
    [1972, 3.81, -0.553301305, 5.258907357],
    [1973, 7.760000001, 3.295521135, 5.645722556],
    [1974, 2.310000003, 1.185336255, -0.540551652],
    [1975, 8.719999998, 9.149912016, -0.205456065],
    [1976, -1.570000002, 1.663103638, 5.388139287],
    [1977, 7.570000001, 7.254764588, 4.624153065],
    [1978, 11.32597799, 5.712532089, 5.535304958],
    [1979, 7.59132468, -5.238182704, 3.166145308],
    [1980, 7.834145016, 6.735821529, -0.256749674],
    [1981, 5.112761091, 6.006203626, 2.537719307],
    [1982, 9.017113914, 3.47573324, -1.802887409],
    [1983, 10.77020251, 7.288892903, 4.583913355],
    [1984, 15.19154002, 3.820737856, 7.23663315],
    [1985, 13.43067752, 5.254299223, 4.169656223],
    [1986, 8.949961764, 4.776564168, 3.462645971],
    [1987, 11.65742779, 3.965355635, 3.45925199],
    [1988, 11.22259498, 9.627782916, 4.177061291],
    [1989, 4.206334355, 5.947343332, 3.67264815],
    [1990, 3.920251368, 5.533454561, 1.885964957],
    [1991, 9.262786084, 1.056831435, -0.108264791],
    [1992, 14.22452959, 5.48239602, 3.522440527],
    [1993, 13.8837293, 4.750776218, 2.751781051],
    [1994, 13.03680663, 6.65892407, 4.02879326],
    [1995, 10.95395434, 7.574491838, 2.684217272],
    [1996, 9.922556756, 7.549522249, 3.772565499],
    [1997, 9.236779894, 4.04982085, 4.447174945],
    [1998, 7.845951782, 6.184415822, 4.481394432],
    [1999, 7.661651506, 8.845755559, 4.794499045],
    [2000, 8.490093404, 3.840991157, 4.077159479],
    [2001, 8.335733476, 4.823966266, 0.954338729],
    [2002, 9.13363079, 3.803975321, 1.695942923],
    [2003, 10.03803048, 7.860381476, 2.796209101],
    [2004, 10.11362138, 7.922936613, 3.852552601],
    [2005, 11.39459181, 7.923430621, 3.48322032],
    [2006, 12.72095566, 8.060732572, 2.782810626],
    [2007, 14.23086093, 7.660815066, 2.010507552],
    [2008, 9.650678918, 3.08669806, 0.122188443],
    [2009, 9.398725632, 7.861888832, -2.599888351],
    [2010, 10.63587107, 8.497584702, 2.708856694],
    [2011, 9.550832179, 5.241315002, 1.54989495],
    [2012, 7.863736448, 5.456388753, 2.280687603],
    [2013, 7.766150097, 6.386106401, 1.841875395],
    [2014, 7.425763656, 7.410227601, 2.287775933],
    [2015, 7.041328879, 7.99625379, 2.706369582],
    [2016, 6.848762204, 8.256305499, 1.667472076],
    [2017, 6.947200793, 6.795383423, 2.241921216],
    [2018, 6.749773833, 6.453851341, 2.945384831],
    [2019, 5.950500754, 3.871436939, 2.294439078],
    [2020, 2.238638357, -5.831053221, -2.767802511],
    [2021, 8.448469416, 9.050277909, 5.945484761],
    [2022, 2.989084086, 7.239693281, 1.935634592],
    [2023, 0, 0, 0]
]
export function DataChart(props) {
    const [chartData, setchartData] = useState([]);
    const range = useSelector((state) => state.countryRange.range);
    const country = useSelector((state) => state.countryRange.country);
    const filterData = () => {
      let filteredData = [["year", country]];
      let col = 0;
      if (country == "USA") {
        col = 3;
      } else if (country == "INDIA") {
        col = 1;
      } else if (country == "China") {
        col = 2;
      } else {
        setchartData(data);
        return;
      }
      let startYear = range[0];
      let endYear = range[1];
      for (let i = 1; i < data.length; i++) {
        let currYear = data[i][0];
        if (currYear <= endYear && currYear >= startYear) {
          filteredData.push([currYear, data[i][col]]);
        }
      }
      setchartData(filteredData);
    };
  
    useEffect(() => {
      console.log(range, country);
      filterData();
    }, [range, country]);
  
    return (
      <div style={{ marginBottom: "20px" }}>
        <Chart
          chartType="LineChart"
          width="100%"
          height="250px"
          data={chartData}
          options={{
            hAxis: {
              format: "#", // Use 'decimal' format to display integers without commas
            },
          }}
        />
      </div>
    );
  }
  