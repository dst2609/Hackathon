import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
  ['Year', 'China', 'India', 'United States'],
  [1960, 59716249311, 37029883876, 543300000000],
  [1961, 50056685957, 39232435784, 563300000000],
  [1962, 47209186415, 42161481858, 605100000000],
  [1963, 50706614526, 48421923459, 638600000000],
  [1964, 59708125204, 56480289941, 685800000000],
  [1965, 70436008642, 59554854576, 743700000000],
  [1966, 76720005492, 45865462034, 815000000000],
  [1967, 72881364882, 50134942204, 861700000000],
  [1968, 70846276051, 53085455871, 942500000000],
  [1969, 79705614855, 58447995017, 1019900000000],
  [1970, 92602634892, 62422483055, 1073300000000],
  [1971, 99800593791, 67351404352, 1164850000000],
  [1972, 113689000000, 71463193831, 1279110000000],
  [1973, 138543000000, 85515269585, 1425380000000],
  [1974, 144189000000, 99525899116, 1545240000000],
  [1975, 163430000000, 98472796457, 1684900000000],
  [1976, 153939000000, 102717000000, 1873410000000],
  [1977, 174936000000, 121487000000, 2081830000000],
  [1978, 218502000000, 137300000000, 2351600000000],
  [1979, 263712000000, 152992000000, 2627330000000],
  [1980, 306165000000, 186325000000, 2857310000000],
  [1981, 289577000000, 193491000000, 3207040000000],
  [1982, 283929000000, 200716000000, 3343790000000],
  [1983, 304749000000, 218262000000, 3634040000000],
  [1984, 313729000000, 212158000000, 4037610000000],
  [1985, 309836000000, 232512000000, 4338980000000],
  [1986, 300514000000, 248986000000, 4579630000000],
  [1987, 327089000000, 279034000000, 4855220000000],
  [1988, 407845000000, 296590000000, 5236440000000],
  [1989, 456289000000, 296042000000, 5641580000000],
  [1990, 394566000000, 320979000000, 5963140000000],
  [1991, 413375000000, 270105000000, 6158130000000],
  [1992, 493137000000, 288208000000, 6520330000000],
  [1993, 619112000000, 279296000000, 6858560000000],
  [1994, 564322000000, 327276000000, 7287240000000],
  [1995, 734485000000, 360282000000, 7639750000000],
  [1996, 863749000000, 392897000000, 8073120000000],
  [1997, 961602000000, 415868000000, 8577550000000],
  [1998, 1029060000000, 421351000000, 9062820000000],
  [1999, 1094010000000, 458820000000, 9631170000000],
  [2000, 1211330000000, 468395000000, 10250900000000],
  [2001, 1339400000000, 485441000000, 10581900000000],
    [2002, 1470560000000, 514938000000, 10929100000000],
    [2003, 1660280000000, 607699000000, 11456400000000],
    [2004, 1955350000000, 709149000000, 12217200000000],
    [2005, 2285960000000, 820382000000, 13039200000000],
    [2006, 2752120000000, 940260000000, 13815600000000],
    [2007, 3550330000000, 1216740000000, 14474200000000],
    [2008, 4594340000000, 1198900000000, 14769900000000],
    [2009, 5101690000000, 1341890000000, 14478100000000],
    [2010, 6087190000000, 1675620000000, 15049000000000],
    [2011, 7551550000000, 1823050000000, 15599700000000],
    [2012, 8532190000000, 1827640000000, 16254000000000],
    [2013, 9570470000000, 1856720000000, 16843200000000],
    [2014, 10475600000000, 2039130000000, 17550700000000],
    [2015, 11061600000000, 2103590000000, 18206000000000],
    [2016, 11233300000000, 2294800000000, 18695100000000],
    [2017, 12310500000000, 2651470000000, 19477300000000],
    [2018, 13894900000000, 2702930000000, 20533100000000],
    [2019, 14280000000000, 2835610000000, 21381000000000],
    [2020, 14687700000000, 2671600000000, 21060500000000],
    [2021, 17820500000000, 3150310000000, 23315100000000],
    [2022, 17963200000000, 3416650000000, 25439700000000],
    [2023, 0, 0, 0]
]

export function MacroCurrentGDP(props) {
  const [chartData, setchartData] = useState([]);
  const range = useSelector((state) => state.countryRange.range);
  const country = useSelector((state) => state.countryRange.country);
  const filterData = () => {
    let filteredData = [["year", country]];
    let col = 0;
    if (country == "USA") {
      col = 3;
    } else if (country == "INDIA") {
      col = 1;
    } else if (country == "China") {
      col = 2;
    } else {
      setchartData(data);
      return;
    }
    let startYear = range[0];
    let endYear = range[1];
    for (let i = 1; i < data.length; i++) {
      let currYear = data[i][0];
      if (currYear <= endYear && currYear >= startYear) {
        filteredData.push([currYear, data[i][col]]);
      }
    }
    setchartData(filteredData);
  };

  useEffect(() => {
    console.log(range, country);
    filterData();
  }, [range, country]);

  return (
    <div style={{ marginBottom: "20px" }}>
      <Chart
        chartType="LineChart"
        width="100%"
        height="250px"
        data={chartData}
        options={{
          hAxis: {
            format: "#", // Use 'decimal' format to display integers without commas
          },
        }}
      />
    </div>
  );
}

export default MacroCurrentGDP;
