import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
    ['Year', 'China', 'India', 'United States'],
      [1960, 0, 0, 0],
      [1961, 0, 0, 0],
      [1962, 0, 0, 0],
      [1963, 0, 0, 0],
      [1964, 0, 0, 0],
      [1965, 0, 0, 0],
      [1966, 0, 0, 0],
      [1967, 0, 0, 0],
      [1968, 0, 0, 0],
      [1969, 0, 0, 0],
      [1970, 0, 0.072826324, 0.113667809],
      [1971, 0, 0.070763187, 0.066102932],
      [1972, 0, 0.024893933, 0.099287786],
      [1973, 0, 0.044331264, 0.135402869],
      [1974, 0, 0.057241382, 0.229090182],
      [1975, 0, -0.010486395, 0.137099799],
      [1976, 0, -0.007502573, 0.155331555],
      [1977, 0, -0.029682276, 0.140261482],
      [1978, 0, 0.0131755, 0.233883413],
      [1979, 0.0000303, 0.03174683, 0.306394355],
      [1980, 0.018617393, 0.042484827, 0.585866342],
      [1981, 0.091512925, 0.047505995, 0.800738126],
      [1982, 0.151446487, 0.035911504, 0.634908483],
      [1983, 0.208696403, 0.002584049, 0.316452387],
      [1984, 0.400983592, 0.009068728, 0.624874152],
      [1985, 0.535444898, 0.04562784, 0.221941613],
      [1986, 0.623930574, 0.047283784, 0.675731298],
      [1987, 0.70745184, 0.076091199, 1.302414002],
      [1988, 0.783141287, 0.030766412, 1.086807482],
      [1989, 0.743607471, 0.085156821, 1.343240723],
      [1990, 0.883756389, 0.073740021, 1.194504107],
      [1991, 1.056182715, 0.02722554, 0.561047032],
      [1992, 2.262251841, 0.095941949, 0.464853987],
      [1993, 4.444268949, 0.197056426, 0.732369584],
      [1994, 5.987186165, 0.297385909, 0.767643589],
      [1995, 4.8808632, 0.59498633, 0.904218188],
      [1996, 4.651812663, 0.617479352, 1.209693103],
      [1997, 4.725343843, 0.86020896, 1.424065573],
      [1998, 4.435501024, 0.625286204, 2.329849229],
      [1999, 3.748958593, 0.472644846, 3.244142242],
      [2000, 3.475125903, 0.765212649, 3.405782569],
      [2001, 3.512988538, 1.056378305, 1.630099648],
      [2002, 3.609081135, 1.011571805, 1.016139191],
      [2003, 3.487418899, 0.605889255, 1.02218472],
      [2004, 3.483641535, 0.765601405, 1.748691345],
      [2005, 4.554263482, 0.88610072, 1.091662133],
      [2006, 4.508600503, 2.130168425, 2.160335287],
      [2007, 4.400983342, 2.073394047, 2.394690938],
      [2008, 3.733610711, 3.620523235, 2.309379021],
      [2009, 2.568894307, 2.651590332, 1.112600342],
      [2010, 4.003544569, 1.635034094, 1.754532686],
      [2011, 3.708806517, 2.002063463, 1.689112771],
      [2012, 2.827105336, 1.31293453, 1.540208119],
      [2013, 3.039854863, 1.516276467, 1.710667534],
      [2014, 2.55924761, 1.69565959, 1.435021307],
      [2015, 2.192177731, 2.092115214, 2.809147629],
      [2016, 1.555636999, 1.937364122, 2.537497659],
      [2017, 1.349123696, 1.507315833, 1.955210863],
      [2018, 1.693894284, 1.558214838, 1.045703992],
      [2019, 1.310715932, 1.78482634, 1.477874528],
      [2020, 1.723175549, 2.409135936, 0.656979527],
      [2021, 1.930786223, 1.419775274, 2.114875815],
      [2022, 1.002979243, 1.461675015, 1.525481826],
      [2023, 0, 0, 0]
]

export function MacrofdiIn(props) {

    const [chartData, setchartData] = useState([]);
    const range = useSelector((state) => state.countryRange.range);
    const country = useSelector((state) => state.countryRange.country);
    const filterData = () => {
      let filteredData = [["year", country]];
      let col = 0;
      if (country == "USA") {
        col = 3;
      } else if (country == "INDIA") {
        col = 1;
      } else if (country == "China") {
        col = 2;
      } else {
        setchartData(data);
        return;
      }
      let startYear = range[0];
      let endYear = range[1];
      for (let i = 1; i < data.length; i++) {
        let currYear = data[i][0];
        if (currYear <= endYear && currYear >= startYear) {
          filteredData.push([currYear, data[i][col]]);
        }
      }
      setchartData(filteredData);
    };
  
    useEffect(() => {
      console.log(range, country);
      filterData();
    }, [range, country]);
  
    return (
      <div style={{ marginBottom: "20px" }}>
        <Chart
          chartType="LineChart"
          width="100%"
          height="250px"
          data={chartData}
          options={{
            hAxis: {
              format: "#", // Use 'decimal' format to display integers without commas
            },
          }}
        />
      </div>
    );
  }
  
  export default MacrofdiIn;
  