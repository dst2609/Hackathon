import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

export const data = [
    ['Year', 'China', 'India', 'United States'],
    [1960, 0, 0, 0],
    [1961, 0, 0, 0],
    [1962, 0, 0, 0],
    [1963, 0, 0, 0],
    [1964, 0, 0, 0],
    [1965, 0, 0, 0],
    [1966, 0, 0, 0],
    [1967, 0, 0, 0],
    [1968, 0, 0, 0],
    [1969, 0, 0, 0],
    [1970, 0, 0.244106278, 0],
    [1971, 0, -0.084131004, 0],
    [1972, 0, -0.411223429, 0],
    [1973, 0, 0.531789507, 0],
    [1974, 0, 0.110015059, 0],
    [1975, 0, -0.149804626, 1.061188056],
    [1976, 0, 1.537101815, 0.204973599],
    [1977, 0, 1.744425808, -0.725324787],
    [1978, 0, 0.504279978, -0.669629473],
    [1979, 0, 0.03290178, -0.005964223],
    [1980, 0, -0.958069194, 0.074440723],
    [1981, 0, -1.394549167, 0.149982492],
    [1982, 1.998389222, -1.257273243, -0.347121185],
    [1983, 1.391309351, -0.887438188, -1.216883258],
    [1984, 0.647056194, -1.08931724, -2.452141897],
    [1985, -3.684854974, -1.780807475, -2.868301506],
    [1986, -2.340654749, -1.83452056, -3.213665031],
    [1987, 0.091718043, -1.853242437, -3.308751518],
    [1988, -0.93221765, -2.408456255, -2.315658087],
    [1989, -0.946110655, -2.301284329, -1.763796667],
    [1990, 3.0405579, -2.191935869, -1.323999555],
    [1991, 3.210640629, -1.588911312, 0.046296529],
    [1992, 1.298016676, -1.55624498, -0.791448803],
    [1993, -1.875105151, -0.67161887, -1.23616054],
    [1994, 1.224124131, -0.51219266, -1.669252924],
    [1995, 0.220343556, -1.544131812, -1.486449358],
    [1996, 0.838553487, -1.515954973, -1.544967362],
    [1997, 3.843898071, -0.713014326, -1.640613309],
    [1998, 3.058322851, -1.638325334, -2.372738757],
    [1999, 1.930054632, -0.703548206, -2.975981801],
    [2000, 1.69386988, -0.982343806, -3.920886147],
    [2001, 1.299162934, 0.290494936, -3.724074988],
    [2002, 2.408745952, 1.370941111, -4.17333961],
    [2003, 2.593030619, 1.443561063, -4.558980861],
    [2004, 3.525766467, 0.110018664, -5.204853436],
    [2005, 5.790933664, -1.253507315, -5.745981704],
    [2006, 8.424165886, -0.988988303, -5.911019221],
    [2007, 9.947889233, -0.663717649, -5.088727742],
    [2008, 9.154063704, -2.583377493, -4.71586121],
    [2009, 4.768155539, -1.951462091, -2.622836696],
    [2010, 3.906734, -3.253483689, -2.870642705],
    [2011, 1.802237144, -3.429284686, -2.918621379],
    [2012, 2.524461645, -5.004889717, -2.572368121],
    [2013, 1.548554383, -2.645667117, -2.01538414],
    [2014, 2.253293518, -1.339508965, -2.108055052],
    [2015, 2.649011376, -1.067549072, -2.243472123],
    [2016, 1.703300028, -0.527880606, -2.119372297],
    [2017, 1.532644969, -1.439488203, -1.887393582],
    [2018, 0.173667285, -2.426975458, -2.14216029],
    [2019, 0.720658984, -1.049612039, -2.066079666],
    [2020, 1.694171965, 1.225112475, -2.83538258],
    [2021, 1.980228144, -1.060923937, -3.56615967],
    [2022, 2.237107245, -2.313700219, -3.819203843],
    [2023, 0, 0, 0]
]

export function CurrentAccBalance(props) {
    
    const [chartData, setchartData] = useState([]);
    const range = useSelector((state) => state.countryRange.range);
    const country = useSelector((state) => state.countryRange.country);
    const filterData = () => {
      let filteredData = [["year", country]];
      let col = 0;
      if (country == "USA") {
        col = 3;
      } else if (country == "INDIA") {
        col = 1;
      } else if (country == "China") {
        col = 2;
      } else {
        setchartData(data);
        return;
      }
      let startYear = range[0];
      let endYear = range[1];
      for (let i = 1; i < data.length; i++) {
        let currYear = data[i][0];
        if (currYear <= endYear && currYear >= startYear) {
          filteredData.push([currYear, data[i][col]]);
        }
      }
      setchartData(filteredData);
    };
  
    useEffect(() => {
      console.log(range, country);
      filterData();
    }, [range, country]);
  
    return (
      <div style={{ marginBottom: "20px" }}>
        <Chart
          chartType="LineChart"
          width="100%"
          height="250px"
          data={chartData}
          options={{
            hAxis: {
              format: "#", // Use 'decimal' format to display integers without commas
            },
          }}
        />
      </div>
    );
  }
  
  export default CurrentAccBalance;
  