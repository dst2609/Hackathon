import React, { useEffect, useState } from "react";
import { Chart } from "react-google-charts";
import { useSelector } from "react-redux";

const AgriculturalDataChart = (props) => {
  const data = [
    ["Year", "China", "India", "United States"],
    ["1960", "0.0", "14.7501180851245", "0.0"],
    ["1961", "0.0", "15.3538364833701", "0.0"],
    ["1962", "0.0", "15.8632981306598", "0.0"],
    ["1963", "0.0", "15.7523883535285", "0.0"],
    ["1964", "0.0", "14.8507399615767", "0.0"],
    ["1965", "0.0", "15.0109077671991", "0.0"],
    ["1966", "0.0", "14.5039929678896", "0.0"],
    ["1967", "0.0", "13.2318612541203", "0.0"],
    ["1968", "0.0", "13.5227880138949", "0.0"],
    ["1969", "0.0", "14.146471583296", "0.0"],
    ["1970", "0.0", "14.4565450929442", "0.0"],
    ["1971", "0.0", "14.9822867425754", "0.0"],
    ["1972", "0.0", "15.102549377401", "0.0"],
    ["1973", "0.0", "15.0152853129175", "0.0"],
    ["1974", "0.0", "16.3459133787071", "0.0"],
    ["1975", "0.0", "15.8384866597931", "0.0"],
    ["1976", "0.0", "16.2658888327907", "0.0"],
    ["1977", "0.0", "16.0808689293586", "0.0"],
    ["1978", "0.0", "17.0964405197176", "0.0"],
    ["1979", "0.0", "17.852034489291", "0.0"],
    ["1980", "0.0", "16.7523757975509", "0.0"],
    ["1981", "0.0", "16.7704437520438", "0.0"],
    ["1982", "0.0", "16.3699959373704", "0.0"],
    ["1983", "0.0", "16.6644546925096", "0.0"],
    ["1984", "0.0", "16.7078036003209", "0.0"],
    ["1985", "0.0", "16.4180128626663", "0.0"],
    ["1986", "0.0", "16.2215838096135", "0.0"],
    ["1987", "0.0", "16.2095493538891", "0.0"],
    ["1988", "0.0", "16.1015348492608", "0.0"],
    ["1989", "0.0", "16.9028458965669", "0.0"],
    ["1990", "0.0", "16.597596442222", "0.0"],
    ["1991", "0.0", "15.6762601605127", "0.0"],
    ["1992", "0.0", "15.8007998170807", "0.0"],
    ["1993", "0.0", "15.9157121078439", "0.0"],
    ["1994", "0.0", "16.764138131312", "0.0"],
    ["1995", "0.0", "17.8658505968554", "0.0"],
    ["1996", "0.0", "17.5963408006414", "0.0"],
    ["1997", "0.0", "16.5185785304333", "16.08717737576"],
    ["1998", "0.0", "15.7193160164939", "15.7743252610376"],
    ["1999", "0.0", "15.1805367132738", "15.4590669050851"],
    ["2000", "0.0", "15.9270230184323", "15.1150749906589"],
    ["2001", "0.0", "15.3070212831531", "13.9193094025158"],
    ["2002", "0.0", "15.5587017262956", "13.4528776402421"],
    ["2003", "0.0", "15.587386648646", "13.3165117541749"],
    ["2004", "31.9750699696706", "15.8272457402543", "13.1741810816537"],
    ["2005", "32.093924328335", "15.9730170447451", "12.9833195194137"],
    ["2006", "32.4523280561507", "17.3036533310705", "12.990722665314"],
    ["2007", "32.3833531162009", "16.8645677753036", "12.7697566103618"],
    ["2008", "32.1194116032469", "17.0986741488338", "12.2167302006078"],
    ["2009", "31.5962380905777", "17.1435776674193", "11.6987895946123"],
    ["2010", "31.612821681214", "17.0299342498178", "11.9060850975322"],
    ["2011", "32.0647911860951", "16.1393374445734", "11.9472468321556"],
    ["2012", "31.5285778659154", "15.8169230038459", "11.8575606302731"],
    ["2013", "30.6710080721227", "15.2530226920972", "11.7981164603897"],
    ["2014", "30.3964442057044", "15.0655701102151", "11.6554754899495"],
    ["2015", "28.9516705780992", "15.5838545862129", "11.6623134302954"],
    ["2016", "28.0694422382647", "15.1622371331248", "11.2236379165299"],
    ["2017", "28.1089368716302", "15.018238750286", "11.2588564739494"],
    ["2018", "27.8410111538917", "14.8815306669789", "11.348073930706"],
    ["2019", "26.7747217059462", "13.455807563065", "11.0580367745651"],
    ["2020", "26.2851690528182", "14.1245873644112", "10.6290647168458"],
    ["2021", "27.5470599965056", "14.4720445271222", "10.7103708073141"],
    ["2022", "27.6989748293804", "13.3482974019972", "0.0"],
    ["2023", "0.0", "0.0", "0.0"],
  ];
  const [chartData, setchartData] = useState([]);
  const range = useSelector((state) => state.countryRange.range);
  const country = useSelector((state) => state.countryRange.country);
  const filterData = () => {
    let filteredData = [["year", country]];
    let col = 0;
    if (country == "USA") {
      col = 5;
    } else if (country == "INDIA") {
      col = 4;
    } else if (country == "China") {
      col = 1;
    } else {
      setchartData(data);
      return;
    }
    let startYear = range[0];
    let endYear = range[1];
    for (let i = 1; i < data.length; i++) {
      let currYear = data[i][0];
      if (currYear <= endYear && currYear >= startYear) {
        filteredData.push([currYear, data[i][col]]);
      }
    }
    setchartData(filteredData);
  };

  useEffect(() => {
    console.log(range, country);
    filterData();
    console.log(chartData);
  }, [range, country]);

  return (
    <div style={{ marginBottom: "20px" }}>
      <Chart
        chartType="LineChart"
        width="100%"
        height="250px"
        data={chartData}
        options={{
          hAxis: {
            format: "#", // Use 'decimal' format to display integers without commas
          },
        }}
      />
    </div>
  );
};

export default AgriculturalDataChart;
